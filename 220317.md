# ğŸ“š 2022.03.16 ê³µë¶€

## Board ê²Œì‹œíŒ

### ì˜¤ëŠ˜ ì˜¤ë¥˜ë‚œ ê²ƒ

-   bcryptë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ”ê±¸ ì–´ì œ í–ˆì—ˆë‹¤. ê·¼ë° ì˜¤ëŠ˜ ë‹¤ì‹œ í•´ë³´ë‹ˆê¹Œ ì•”í˜¸í™”ê°€ ë˜ì§€ ì•Šì€ ì±„ë¡œ DBì— ì €ì¥ì´ ë˜ê³ ìˆì—ˆë‹¤.

#### í•´ê²° ë°©ë²•

```javascript
// server/models/User.js

const userSchema = {
    ...
}

userSchema.pre("save", function (next) {
    // ì €ì¥í•˜ê¸°ì „ì— ì‹¤í–‰í•  ì½”ë“œ
    var user = this;
    if (user.isModified("password")) {
        // ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë ë•Œë§Œ
        bcrypt.genSalt(saltRounds, function (err, salt) {
            if (err) return next(err); // nextëŠ” ë°”ë¡œ registerë¡œ ë„˜ì–´ê°
            bcrypt.hash(user.password, salt, function (err, hash) {
                if (err) return next(err);
                user.password = hash;
                next();
            });
        });
    } else {
        // ê·¸ ì™¸ì—ëŠ” ê·¸ëƒ¥ ë‚´ë³´ë‚¸ë‹¤
        next();
    }
});

const User = mongoose.model("User", userSchema);
module.exports = { User };
```

-   ë‹¨ìˆœíˆ module.exportsë¥¼ ë§¨ ë§ˆì§€ë§‰ìœ¼ë¡œ ì˜®ê¸°ë©´ ë˜ëŠ” ë¬¸ì œì˜€ë‹¤. ì›ë˜ ì½”ë“œëŠ” userSchma.pre ì½”ë“œ ì´ì „ì— module.exports ì½”ë“œë¥¼ ë„£ì—ˆê¸° ë•Œë¬¸ì— ê·¸ ì´í›„ ì½”ë“œë“¤ì´ ì‹¤í–‰ì´ ë˜ì§€ ì•Šì€ ëª¨ì–‘ì´ë‹¤.
